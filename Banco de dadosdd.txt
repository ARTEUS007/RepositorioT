DROP DATABASE IF EXISTS DBDELEGACIA;

CREATE DATABASE DBDELEGACIA;

USE DBDELEGACIA;

CREATE TABLE CRIME (
	IDCRIME INT NOT NULL,
	DESCRICAO VARCHAR(200),
	RUA VARCHAR(100),
	NUMERO INT,
	COMPLEMENTO VARCHAR(255),
	BAIRRO VARCHAR(100),
	CEP VARCHAR(8),
	CIDADE VARCHAR(100),
	ESTADO CHAR(2)
);

ALTER TABLE CRIME DROP RUA;
ALTER TABLE CRIME DROP NUMERO;
ALTER TABLE CRIME DROP COMPLEMENTO;
ALTER TABLE CRIME DROP BAIRRO;
ALTER TABLE CRIME DROP CEP;
ALTER TABLE CRIME DROP CIDADE;
ALTER TABLE CRIME DROP ESTADO;

ALTER DROP CRIME ADD DTCRIME DATETIME; 

CREATE TABLE CRIMINOSO(
  RUA VARCHAR(100),
  NUMERO INT,
  COMPLEMENTO VARCHAR(255),
  BAIRRO VARCHAR(100),
  CEP CHAR(8),
  CIDADE VARCHAR(100),
  ESTADO CHAR(2),
  DTNASCIMENTO DATE,
  TELEFONE VARCHAR(15)
);

ALTER TABLE CRIMINOSO DROP RUA;
ALTER TABLE CRIMINOSO DROP NUMERO;
ALTER TABLE CRIMINOSO DROP BAIRRO;
ALTER TABLE CRIMINOSO DROP CEP;
ALTER TABLE CRIMINOSO DROP CIDADE;
ALTER TABLE CRIMINOSO DROP ESTADO;
ALTER TABLE CRIMINOSO DROP TELEFONE;

ALTER DROP CRIMINOSO ADD NOME;


CREATE TABLE OCORRENCIA (
	IDOCORRENCIA INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	DT_OCORRENCIA DATE
);







CREATE TABLE ITEM_OCORRENCIA (
	IDITEM INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	IDOCORRENCIA INT NOT NULL,
	DESCRICAO VARCHAR (100),
	CONSTRAINT FK_ITEM_OCORRENCIA_OCORRENCIA FOREIGN KEY (IDOCORRENCIA) REFERENCES OCORRENCIA(IDOCORRENCIA)
);

CREATE TABLE VITIMA (
  RUA VARCHAR(100),
  NUMERO INT,
  COMPLEMENTO VARCHAR(255),
  BAIRRO VARCHAR(100),
  CEP VARCHAR(8),
  CIDADE VARCHAR(100),
  ESTADO CHAR(2),
  DTNASCIMENTO DATE
);

ALTER TABLE VITIMA DROP RUA;
ALTER TABLE VITIMA DROP NUMERO;
ALTER TABLE VITIMA DROP COMPLEMENTO;
ALTER TABLE VITIMA DROP BAIRRO;
ALTER TABLE VITIMA DROP CEP;
ALTER TABLE VITIMA DROP CIDADE;
ALTER TABLE VITIMA DROP ESTADO;

ALTER DROP VITIMA ADD NOME;












CREATE TABLE COMETE(
	IDCRIME INT NOT NULL,
	IDCRIMINOSO INT NOT NULL
);

CREATE TABLE ATACA (
	OBSERVACAO CHAR(1)
);

ALTER DROP ATACA ADD IDVITIMA;
ALTER DROP ATACA ADD IDCRIMINOSO;

ALTER TABLE ATACA DROP OBSERVACAO;

CREATE TABLE SOFRE (
	IDCRIME INT NOT NULL,
	IDVITIMA INT NOT NULL
);

CREATE TABLE ARMA (
	IDARMA INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	MARCA VARCHAR(110)
);

ALTER DROP ARMA ADD DESCRICAO;
ALTER DROP ARMA ADD TIPO;
ALTER DROP ARMA ADD IDENTIFICACAO;

ALTER TABLE ARMA DROP MARCA;

CREATE TABLE USAR (
	IDARMA INT NOT NULL,
	IDCRIME INT NOT NULL
);

